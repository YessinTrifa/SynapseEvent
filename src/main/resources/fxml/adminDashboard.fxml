<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.paint.RadialGradient?>
<?import javafx.scene.paint.Stop?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.synapseevent.controller.AdminDashboardController" 
      style="-fx-background-color: linear-gradient(to bottom, #0f172a, #111827);">

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" style="-fx-background-color: rgba(30, 41, 59, 0.8); -fx-padding: 15 20; -fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 0 0 1 0;">
        <Label text="SynapseEvent" textFill="white" style="-fx-font-size: 20; -fx-font-weight: bold;">
            <textFill>
                <RadialGradient centerX="0.5" centerY="0.5" radius="0.5">
                    <stops>
                        <Stop>
                            <color>
                                <Color red="0.8954386115074158" green="0.9134151935577393" blue="0.9157894849777222" />
                            </color>
                        </Stop>
                        <Stop offset="1.0">
                            <color>
                                <Color red="0.16830000281333923" green="0.3146097660064697" blue="0.33000001311302185" />
                            </color>
                        </Stop>
                    </stops>
                </RadialGradient>
            </textFill>
        </Label>
        <Region HBox.hgrow="ALWAYS" />
        <Label text="Admin Dashboard" textFill="#94a3b8" style="-fx-font-size: 14;" />
        <Region prefWidth="20" />
        <Button text="Logout" onAction="#logout" 
                style="-fx-background-color: rgba(239, 68, 68, 0.2); -fx-text-fill: #f87171; -fx-border-color: #f87171; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8 16;" />
    </HBox>

    <!-- Statistics Cards -->
    <HBox spacing="15" style="-fx-padding: 20 20 10 20;">
        <VBox style="-fx-background-color: rgba(30, 41, 59, 0.6); -fx-background-radius: 12; -fx-padding: 15; -fx-border-color: rgba(255,255,255,0.08); -fx-border-radius: 12;" HBox.hgrow="ALWAYS">
            <Label text="Total Users" textFill="#94a3b8" style="-fx-font-size: 12;" />
            <Label fx:id="totalUsersLabel" text="0" textFill="white" style="-fx-font-size: 28; -fx-font-weight: bold;" />
        </VBox>
        <VBox style="-fx-background-color: rgba(30, 41, 59, 0.6); -fx-background-radius: 12; -fx-padding: 15; -fx-border-color: rgba(255,255,255,0.08); -fx-border-radius: 12;" HBox.hgrow="ALWAYS">
            <Label text="Total Events" textFill="#94a3b8" style="-fx-font-size: 12;" />
            <Label fx:id="totalEventsLabel" text="0" textFill="white" style="-fx-font-size: 28; -fx-font-weight: bold;" />
        </VBox>
        <VBox style="-fx-background-color: rgba(30, 41, 59, 0.6); -fx-background-radius: 12; -fx-padding: 15; -fx-border-color: rgba(255,255,255,0.08); -fx-border-radius: 12;" HBox.hgrow="ALWAYS">
            <Label text="Pending Bookings" textFill="#94a3b8" style="-fx-font-size: 12;" />
            <Label fx:id="pendingBookingsLabel" text="0" textFill="white" style="-fx-font-size: 28; -fx-font-weight: bold;" />
        </VBox>
        <VBox style="-fx-background-color: rgba(30, 41, 59, 0.6); -fx-background-radius: 12; -fx-padding: 15; -fx-border-color: rgba(255,255,255,0.08); -fx-border-radius: 12;" HBox.hgrow="ALWAYS">
            <Label text="Open Requests" textFill="#94a3b8" style="-fx-font-size: 12;" />
            <Label fx:id="openRequestsLabel" text="0" textFill="white" style="-fx-font-size: 28; -fx-font-weight: bold;" />
        </VBox>
    </HBox>

    <!-- Main TabPane -->
    <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: transparent; -fx-padding: 10 20 20 20;" VBox.vgrow="ALWAYS">
        <Tab text="Users" style="-fx-background-color: #1e293b; -fx-text-fill: #94a3b8; -fx-font-size: 13;">
            <content>
                <VBox spacing="15" style="-fx-background-color: rgba(15, 23, 42, 0.5); -fx-background-radius: 12; -fx-padding: 20;">
                    <HBox spacing="10">
                        <Button text="+ Add User" onAction="#addUser" 
                                style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-weight: 600;" />
                        <Button text="+ Create Enterprise" onAction="#createEnterprise" 
                                style="-fx-background-color: rgba(139, 92, 246, 0.2); -fx-text-fill: #a78bfa; -fx-border-color: #8b5cf6; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-weight: 600;" />
                    </HBox>
                    <TableView fx:id="usersTable" style="-fx-background-color: rgba(30, 41, 59, 0.4); -fx-background-radius: 8; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 8; -fx-text-fill: white;" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="userNameColumn" text="Name" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="userEmailColumn" text="Email" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="userRoleColumn" text="Role" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="userActionColumn" text="Action" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </content>
        </Tab>
        <Tab text="Events" style="-fx-background-color: #1e293b; -fx-text-fill: #94a3b8; -fx-font-size: 13;">
            <content>
                <VBox spacing="15" style="-fx-background-color: rgba(15, 23, 42, 0.5); -fx-background-radius: 12; -fx-padding: 20;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Button text="+ Create Event" onAction="#createEvent" 
                                style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-weight: 600;" />
                        <Label text="Filter by Type:" textFill="#94a3b8" />
                        <ComboBox fx:id="eventTypeFilter" onAction="#filterEventsByType" 
                                  style="-fx-background-color: rgba(30, 41, 59, 0.8); -fx-text-fill: white; -fx-border-color: rgba(255,255,255,0.2); -fx-background-radius: 8;" />
                    </HBox>
                    <TableView fx:id="eventsTable" style="-fx-background-color: rgba(30, 41, 59, 0.4); -fx-background-radius: 8; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 8; -fx-text-fill: white;" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="eventNameColumn" text="Name" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventDateColumn" text="Date" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventLocationColumn" text="Location" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventCapacityColumn" text="Capacity" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventPriceColumn" text="Price" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventStatusColumn" text="Status" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventTypeColumn" text="Type" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="eventActionColumn" text="Action" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </content>
        </Tab>
        <Tab text="Bookings" style="-fx-background-color: #1e293b; -fx-text-fill: #94a3b8; -fx-font-size: 13;">
            <content>
                <VBox spacing="15" style="-fx-background-color: rgba(15, 23, 42, 0.5); -fx-background-radius: 12; -fx-padding: 20;">
                    <TableView fx:id="bookingsTable" style="-fx-background-color: rgba(30, 41, 59, 0.4); -fx-background-radius: 8; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 8; -fx-text-fill: white;" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="bookingUserColumn" text="User" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="bookingTypeColumn" text="Event" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="bookingEventIdColumn" text="Event ID" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="bookingDateColumn" text="Booking Date" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="bookingStatusColumn" text="Status" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="bookingActionColumn" text="Action" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </content>
        </Tab>
        <Tab text="Custom Requests" style="-fx-background-color: #1e293b; -fx-text-fill: #94a3b8; -fx-font-size: 13;">
            <content>
                <VBox spacing="15" style="-fx-background-color: rgba(15, 23, 42, 0.5); -fx-background-radius: 12; -fx-padding: 20;">
                    <TableView fx:id="customRequestsTable" style="-fx-background-color: rgba(30, 41, 59, 0.4); -fx-background-radius: 8; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 8; -fx-text-fill: white;" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="requestUserColumn" text="User" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestTypeColumn" text="Type" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestDateColumn" text="Date" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestBudgetColumn" text="Budget" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestCapacityColumn" text="Capacity" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestLocationColumn" text="Location" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestDetailsColumn" text="Details" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestReasonColumn" text="Reason" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestStatusColumn" text="Status" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="requestActionColumn" text="Action" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </content>
        </Tab>
        <Tab text="Enterprises" style="-fx-background-color: #1e293b; -fx-text-fill: #94a3b8; -fx-font-size: 13;">
            <content>
                <VBox spacing="15" style="-fx-background-color: rgba(15, 23, 42, 0.5); -fx-background-radius: 12; -fx-padding: 20;">
                    <HBox spacing="10">
                        <Button text="+ Add Enterprise" onAction="#addEnterprise" 
                                style="-fx-background-color: rgba(139, 92, 246, 0.2); -fx-text-fill: #a78bfa; -fx-border-color: #8b5cf6; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-weight: 600;" />
                    </HBox>
                    <TableView fx:id="entreprisesTable" style="-fx-background-color: rgba(30, 41, 59, 0.4); -fx-background-radius: 8; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 8; -fx-text-fill: white;" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="entrepriseNameColumn" text="Name" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="entrepriseSiretColumn" text="SIRET" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                            <TableColumn fx:id="entrepriseActionColumn" text="Action" style="-fx-text-fill: white; -fx-background-color: #1e293b;" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </content>
        </Tab>
    </TabPane>
</VBox>
