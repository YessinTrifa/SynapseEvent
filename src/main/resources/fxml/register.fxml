<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane styleClass="root" stylesheets="@../css/auth.css"
            xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.synapseevent.controller.RegisterController">

    <center>
        <StackPane alignment="CENTER">
        <HBox maxWidth="1100" spacing="40" styleClass="shell" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="60" right="60" bottom="60" left="60"/>
            </padding>

            <!-- LEFT: hero -->
            <VBox spacing="14" styleClass="hero" HBox.hgrow="ALWAYS">
                <Label styleClass="brand-title" text="SynapseEvent"/>
                <Label styleClass="brand-subtitle"
                       text="Create an account to manage events, guests, tickets and teams in one place."
                       wrapText="true"/>

                <VBox spacing="10" styleClass="hero-bullets">
                    <Label styleClass="hero-line" text="Faster event creation &amp; tracking"/>
                    <Label styleClass="hero-line" text="Your guests &amp; tickets stay synced"/>
                    <Label styleClass="hero-line" text="Work with your team in one place"/>
                </VBox>

                <Region VBox.vgrow="ALWAYS"/>
                <Label styleClass="muted" text="© SynapseEvent"/>
            </VBox>

            <!-- RIGHT: register card -->
            <VBox maxWidth="560" minWidth="380" spacing="16" styleClass="card">
                <Label styleClass="card-title" text="Create account"/>
                <Label styleClass="card-subtitle" text="Fill the details below to get started."/>


                        <VBox spacing="16" styleClass="form-body">

                            <!-- GRID: web-like two columns -->
                            <GridPane hgap="14" vgap="12">
                                <columnConstraints>
                                    <ColumnConstraints percentWidth="50" hgrow="ALWAYS"/>
                                    <ColumnConstraints percentWidth="50" hgrow="ALWAYS"/>
                                </columnConstraints>

                                <!-- Last / First -->
                                <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                    <Label styleClass="field-label" text="Last name"/>
                                    <TextField fx:id="nomField" promptText="Last Name" styleClass="field" maxWidth="1e9"/>
                                    <Label fx:id="nomError" styleClass="error" visible="false" managed="false"/>
                                </VBox>

                                <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                    <Label styleClass="field-label" text="First name"/>
                                    <TextField fx:id="prenomField" promptText="Name" styleClass="field" maxWidth="1e9"/>
                                    <Label fx:id="prenomError" styleClass="error" visible="false" managed="false"/>
                                </VBox>

                                <!-- Email (full width) -->
                                <VBox spacing="6" GridPane.columnSpan="2" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                    <Label styleClass="field-label" text="Email"/>
                                    <TextField fx:id="emailField" promptText="name@example.com" styleClass="field" maxWidth="1e9"/>
                                    <Label fx:id="emailError" styleClass="error" visible="false" managed="false"/>
                                </VBox>

                                <!-- Passwords -->
                                <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="2">
                                    <Label styleClass="field-label" text="Password"/>
                                    <PasswordField fx:id="passwordField" promptText="••••••••" styleClass="field" maxWidth="1e9"/>
                                    <Label fx:id="passwordError" styleClass="error" visible="false" managed="false"/>
                                </VBox>

                                <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="2">
                                    <Label styleClass="field-label" text="Confirm password"/>
                                    <PasswordField fx:id="confirmPasswordField" promptText="••••••••" styleClass="field" maxWidth="1e9"/>
                                    <Label fx:id="confirmPasswordError" styleClass="error" visible="false" managed="false"/>
                                </VBox>

                                <!-- Phone / Address -->
                                <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="3">
                                    <Label styleClass="field-label" text="Phone (optional)"/>
                                    <TextField fx:id="phoneField" promptText="+216 ..." styleClass="field" maxWidth="1e9"/>
                                    <Label fx:id="phoneError" styleClass="error" visible="false" managed="false"/>
                                </VBox>

                                <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="3">
                                    <Label styleClass="field-label" text="Address (optional)"/>
                                    <TextField fx:id="addressField" promptText="City, Street..." styleClass="field" maxWidth="1e9"/>
                                </VBox>
                            </GridPane>

                            <!-- Enterprise section -->
                            <!-- Enterprise section (clean) -->
                            <VBox spacing="10" styleClass="section">
                                <Label styleClass="section-title" text="Enterprise"/>


                                <!-- Existing enterprise -->
                                <VBox spacing="6" fx:id="existingEnterpriseBox">
                                    <Label styleClass="field-label" text="Select enterprise"/>
                                    <ComboBox fx:id="entrepriseCombo"
                                              promptText="Select enterprise"
                                              styleClass="field combo-web"
                                              maxWidth="1e9"/>
                                </VBox>

                                <!-- New enterprise -->
                                <VBox spacing="12" fx:id="newEnterpriseBox" visible="false" managed="false">
                                    <VBox spacing="6">
                                        <Label styleClass="field-label" text="Enterprise name"/>
                                        <TextField fx:id="entrepriseNameField" promptText="Enterprise name" styleClass="field" maxWidth="1e9"/>
                                    </VBox>

                                    <VBox spacing="6">
                                        <Label styleClass="field-label" text="SIRET number"/>
                                        <TextField fx:id="entrepriseSiretField" promptText="14 digits" styleClass="field" maxWidth="1e9"/>
                                        <Label fx:id="siretError" styleClass="error" visible="false" managed="false"/>
                                    </VBox>
                                </VBox>
                            </VBox>

                            <Label fx:id="messageLabel" styleClass="muted"/>

                            <VBox spacing="10">
                                <Button text="Create account" defaultButton="true"
                                        onAction="#registerUser"
                                        styleClass="btn-primary" maxWidth="1e9"/>
                                <Button text="Back to login"
                                        onAction="#goToLogin"
                                        styleClass="btn-link" maxWidth="1e9"/>
                            </VBox>

                        </VBox>
            </VBox>
        </HBox>
        </StackPane>
    </center>
</BorderPane>
